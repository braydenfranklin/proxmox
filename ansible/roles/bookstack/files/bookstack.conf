<VirtualHost *:80>
	DocumentRoot /var/www/bookstack/public/

	ErrorLog /var/log/apache2/bookstack-error.log
	CustomLog /var/log/apache2/bookstack-access.log combined

	<Directory /var/www/bookstack/public/>
		Options -Indexes +FollowSymLinks
		AllowOverride None
		Require all granted
		<IfModule mod_rewrite.c>
		  <IfModule mod_negotiation.c>
		    Options -MultiViews -Indexes
		</IfModule>
		
		RewriteEngine On
		
		# Handle Authorization Header
		RewriteCond %{HTTP:Authorization} .
		RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
		
		# Redirect Trailing Slashes If Not A Folder...
		RewriteCond %{REQUEST_FILENAME} !-d
		RewriteCond %{REQUEST_URI} (.+)/$
		RewriteRule ^ %1 [L,R=301]
		
		# Handle Front Controller...
		RewriteCond %{REQUEST_FILENAME} !-d
		RewriteCond %{REQUEST_FILENAME} !-f
		RewriteRule ^ index.php [L]
		 </IfModule>
	</Directory>
</VirtualHost>